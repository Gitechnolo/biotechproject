<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Meteo Semplice</title>
    <link rel="stylesheet" href="https://gitechnolo.github.io/biotechproject/Biotech-file/Biotech.css">
    <link rel="stylesheet" href="https://gitechnolo.github.io/biotechproject/Biotech-file/Biotech_gradient.css">
    <link rel="preload" href="https://gitechnolo.github.io/biotechproject/Biotech-file/SansationRegular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="https://gitechnolo.github.io/biotechproject/Biotech-file/SansationBold.woff2" as="font" type="font/woff2" crossorigin>
    <script src="https://gitechnolo.github.io/biotechproject/Biotech-file/Biotech.js" defer></script>
<script src="Biotech-file/reportPerformance.js"></script>
<style>
/* Container principale - adatto allo stile Biotech */
.tech-audit-container {
  position: relative;
  z-index: 10;
  max-width: 1100px;
  margin: 60px auto;
  padding: 40px 30px;
  background: rgba(20, 30, 48, 0.85);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  color: #e0f7fa;
  line-height: 1.8;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(0, 230, 118, 0.3);
}

.tech-audit-container h2 {
  text-align: center;
  font-size: 2.2em;
  color: #a7ffeb;
  margin-bottom: 10px;
  text-shadow: 0 0 10px rgba(0, 230, 118, 0.4);
}

.tech-audit-container p.lead {
  text-align: center;
  font-size: 1.2em;
  color: #b2dfdb;
  margin-bottom: 40px;
}

/* Griglia metriche */
.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 25px;
  margin: 50px 0;
  text-align: center;
}

/* Cerchio di progresso - versione sicura per sfondo scuro */
.progress-circle {
  --value: 0;
  --size: 140px;
  --thickness: 12px;
  width: var(--size);
  height: var(--size);
  border-radius: 50%;
  background: conic-gradient(#00e676 var(--value), #0d47a1 0);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
  box-shadow: 0 0 20px rgba(0, 230, 118, 0.2);
  z-index: 1;
}

/* Buco centrale - nero/trasparente per non interferire */
.progress-circle::before {
  content: '';
  position: absolute;
  width: calc(var(--size) - var(--thickness) * 2);
  height: calc(var(--size) - var(--thickness) * 2);
  background: #0a1a2a;
  border-radius: 50%;
  z-index: 1;
}

/* Testo al centro */
.progress-circle::after {
  content: attr(data-value) '%';
  position: relative;
  z-index: 2;
  font-size: 1.4em;
  font-family: 'Sansation', sans-serif;
  font-weight: 600;
  color: #a7ffeb;
  text-shadow: 0 0 5px rgba(0, 230, 118, 0.7);
}   
#performance-trend {
  background: rgba(10, 26, 42, 0.6);
  border: 1px solid rgba(0, 230, 118, 0.3);
  border-radius: 8px;
  display: block;
  margin: 30px auto;
  box-shadow: 0 0 15px rgba(0, 230, 118, 0.1);
  max-width: 100%;
}

#performance-trend:hover {
  box-shadow: 0 0 20px rgba(0, 230, 118, 0.2);
  transform: translateY(-1px);
  transition: all 0.3s ease;
}         
</style>    
    </head>
<body class="biotechbody">


<div class="tech-audit-container">
  <h2>Stima Tecnologica | Biotech Project</h2>
  <p class="lead">Risultati verificati di performance, accessibilit√† e best practice.</p>

  <div class="metrics-grid">
    <div class="metric">
      <div class="progress-circle" style="--value: 99;" data-value="99"></div>
      <p>Prestazioni Mobile</p>
    </div>
    <div class="metric">
      <div class="progress-circle" style="--value: 100;" data-value="100"></div>
      <p>Prestazioni Desktop</p>
    </div>
    <div class="metric">
      <div class="progress-circle" style="--value: 97;" data-value="97"></div>
      <p>Accessibilit√†</p>
    </div>
    <div class="metric">
      <div class="progress-circle" style="--value: 93;" data-value="93"></div>
      <p>Best Practices</p>
    </div>
    <div class="metric">
      <div class="progress-circle" style="--value: 100;" data-value="100"></div>
      <p>SEO</p>
    </div>
  </div>
</div> 

<section class="tech-section">
  <h3>Andamento delle Prestazioni</h3>
  <canvas id="performance-trend" width="800" height="200"></canvas>
  <p id="last-update" style="color:#b2dfdb; font-size:0.9em; text-align:center; margin-top:10px;">Aggiornato il: caricamento...</p>
</section> 

<p style="color:#64ffda; font-size:0.9em; text-align:center;">
  *Andamento simulato basato su ottimizzazioni reali del progetto Biotech
</p>   


<section aria-labelledby="jobs-title">
  <h2 id="jobs-title">Posizioni Aperte</h2>
  <article class="job-listing">...</article>
  <article class="job-listing">...</article>
  <span aria-label="Luogo">üìç</span> Roma
<!-- Oppure -->
<span class="visually-hidden">Luogo:</span> üìç Roma
</section> 






































portfolio.js
<script>
// ================================
// PERFORMANCE DASHBOARD: Ottimizzato e corretto
// ================================

// --- 1. Filtro con animazione fluida ---
function filterSelection(category) {
  const items = document.querySelectorAll('.portfolio-col');
  window.requestAnimationFrame(() => {
    items.forEach(item => {
      const show = category === 'all' || item.classList.contains(category);
      item.classList.toggle('portfolio-show', show);
    });
  });
}

// --- 2. Gestione pulsanti filtro (con classe attiva) ---
document.addEventListener('DOMContentLoaded', () => {
  // Carica i dati all'avvio
  loadPerformanceData();

  // Inizializza i pulsanti del filtro
  const btnContainer = document.getElementById('myBtnContainer');
  if (btnContainer) {
    const buttons = btnContainer.querySelectorAll('.btn');
    buttons.forEach(btn => {
      btn.addEventListener('click', function () {
        // Aggiorna lo stato attivo
        buttons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');

        // Applica il filtro (SENZA ricaricare i dati)
        filterSelection(this.dataset.filter || 'all');
      });
    });
  }

  // Pulsante di aggiornamento (gestisce duplicati con classe)
  document.getElementById('refresh-btn')?.addEventListener('click', async () => {
    await loadPerformanceData();
    showNotification('Dati aggiornati con successo');
  });

  // Gestisci eventuali altri pulsanti "Aggiorna" con classe
  document.querySelectorAll('.refresh-btn').forEach(btn => {
    btn.addEventListener('click', async () => {
      await loadPerformanceData();
      showNotification('Dati aggiornati con successo');
    });
  });
});

// --- 3. Carica dati da JSON e popola la dashboard ---
async function loadPerformanceData() {
  try {
    const response = await fetch('tools/performance-data.json');
    if (!response.ok) throw new Error('Dati non disponibili');

    const data = await response.json();
    const container = document.querySelector('.portfolio-row');
    if (!container) return;

    // Pulisce il contenuto esistente
    container.innerHTML = '';

    // Genera le card dinamicamente
    data.pages.forEach(page => {
      const cell = createPerformanceCard(page);
      container.appendChild(cell);
    });

    // ‚úÖ DOPO l'inserimento: applica il filtro iniziale
    filterSelection(document.querySelector('#myBtnContainer .btn.active')?.dataset.filter || 'all');

    // ‚úÖ Riattiva lazy loading per nuove immagini
    const newImages = document.querySelectorAll('.portfolio-content img[data-src]');
    if ('IntersectionObserver' in window && newImages.length > 0) {
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.add('loaded');
            obs.unobserve(img);
          }
        });
      }, { threshold: 0.1, rootMargin: '50px' });

      newImages.forEach(img => observer.observe(img));
    }

    // ‚úÖ Aggiorna data ultimo aggiornamento
    const lastUpdate = document.getElementById('last-update');
    if (lastUpdate) {
      lastUpdate.textContent = 'Aggiornato il: ' + new Date().toLocaleString();
    }

    } catch (err) {
    console.warn('Errore nel caricamento dei dati di performance:', err.message);
    
    // Mostra contenuto statico di fallback, se presente
    fallbackToStaticContent();

    // Aggiorna messaggio di errore
    const lastUpdate = document.getElementById('last-update');
    if (lastUpdate) {
      lastUpdate.textContent = 'Errore nel caricamento dei dati. Ultimo aggiornamento sconosciuto.';
    }
  }
}

// --- 4. Crea una card delle performance ---
function createPerformanceCard(page) {
  const category = getMaturityCategory(page.performanceScore);

  const col = document.createElement('div');
  col.className = `portfolio-col ${category} portfolio-show`;
  col.setAttribute('data-page', page.slug);

  const color = getScoreColor(page.performanceScore);

  col.innerHTML = `
    <div class="portfolio-content">
      <div class="perf-meter" style="background: conic-gradient(${color} ${page.performanceScore}%, #e0e0e0 ${page.performanceScore}%)">
        <span>${page.performanceScore}</span>
      </div>
      <div class="fadebox">
        <strong>${page.label}</strong><br>
        Score: ${page.performanceScore}/100 ‚Ä¢ ${formatLoadTime(page.loadTime)}
      </div>
      <p class="greentext">${page.slug} ‚Äî ${capitalize(category)}</p>
    </div>
  `;

  return col;
}

// --- 5. Mappa il punteggio a un colore ---
function getScoreColor(score) {
  if (score >= 90) return '#4CAF50';   // Verde (Ottimo)
  if (score >= 75) return '#8BC34A';   // Verde chiaro (Buono)
  if (score >= 60) return '#FF9800';   // Arancione (Medio)
  return '#F44336';                    // Rosso (Scadente)
}

// --- 6. Calcola categoria di maturit√† tecnica ---
function getMaturityCategory(score) {
  if (score >= 90) return 'optimized';
  if (score >= 75) return 'compatible';
  if (score >= 60) return 'needs-improvement';
  return 'deprecated';
}

// --- 7. Formatta il tempo di caricamento ---
function formatLoadTime(ms) {
  if (!ms) return '‚Äì ms';
  return ms < 1000 ? `${ms} ms` : `${(ms / 1000).toFixed(2)} s`;
}

// --- 8. Capitalizza la prima lettera (e formatta categorie) ---
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).replace('-', ' ');
}

// --- 9. Fallback: usa contenuto HTML statico se JSON non disponibile ---
function fallbackToStaticContent() {
  console.log('Fallback attivato: utilizzo del contenuto HTML statico.');
  // Il contenuto statico nel DOM rimane visibile
  // Puoi eventualmente aggiungere qui card di esempio se vuoi
}

// --- 10. Mostra notifica temporanea ---
function showNotification(message) {
  const notif = document.createElement('div');
  notif.className = 'notification';
  notif.textContent = message;
  notif.style.cssText = `
    position: fixed; top: 20px; right: 20px; 
    background: #0a1a2a; color: #a7ffeb; 
    padding: 12px 20px; border: 1px solid #00e676; 
    border-radius: 6px; font-size: 14px; 
    z-index: 9999; opacity: 0; 
    transition: opacity 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  `;
  document.body.appendChild(notif);

  // Mostra
  setTimeout(() => { notif.style.opacity = '1'; }, 100);
  // Nasconde
  setTimeout(() => { notif.style.opacity = '0'; }, 3000);
  // Rimuove dal DOM
  setTimeout(() => { notif.remove(); }, 3500);
}
`` 
</script>   




<div id="myBtnContainer">
  <button class="btn active" data-filter="all">Show all</button>
  <button class="btn" data-filter="compatible">Compatible</button>
  <button class="btn" data-filter="optimized">Optimized</button>
  <button class="btn" data-filter="needs-improvement">Needs Improvement</button>
  <button class="btn" data-filter="deprecated">Deprecated</button>
</div>

<!-- Griglia delle pagine -->
<div class="portfolio-row">
  <!-- Pagina ottimizzata -->
  <div class="portfolio-col optimized portfolio-show">
    <div class="portfolio-content">
      <div class="fadebox">Pagina /home: caricamento rapido, SEO ottimizzata, conforme WCAG</div>
      <p class="greentext">/home ‚Äî Optimized</p>
    </div>
  </div>

  <!-- Pagina compatibile -->
  <div class="portfolio-col compatible portfolio-show">
    <div class="portfolio-content">
      <div class="fadebox">Pagina /about: funziona su tutti i browser, ma tempi di caricamento elevati</div>
      <p class="greentext">/about ‚Äî Compatible</p>
    </div>
  </div>

  <!-- Pagina da migliorare -->
  <div class="portfolio-col needs-improvement portfolio-show">
    <div class="portfolio-content">
      <div class="fadebox">Pagina /services: errori di accessibilit√†, script bloccanti</div>
      <p class="greentext">/services ‚Äî Needs Improvement</p>
    </div>
  </div>

  <!-- Pagina deprecata -->
  <div class="portfolio-col deprecated portfolio-show">
    <div class="portfolio-content">
      <div class="fadebox">Pagina /legacy: tecnologie obsolete (jQuery 1.x), non mantenuta</div>
      <p class="greentext">/legacy ‚Äî Deprecated</p>
    </div>
  </div>

  <!-- Altre pagine -->
  <div class="portfolio-col optimized portfolio-show">
    <div class="portfolio-content">
      <div class="fadebox">Pagina /contact: PWA installabile, offline support</div>
      <p class="greentext">/contact ‚Äî Optimized</p>
    </div>
  </div>

  <div class="portfolio-col compatible portfolio-show">
    <div class="portfolio-content">
      <div class="fadebox">Pagina /faq: nessun errore critico, ma mobile non perfetto</div>
      <p class="greentext">/faq ‚Äî Compatible</p>
    </div>
  </div>
</div>

<!-- Testo aggiornamento -->
<p class="sansation-light-italic">Ultimo controllo: 21 ago 2025</p>

<!-- Pulsante aggiorna -->
<div class="biotechcenter">
  <button id="refresh-btn">üîÑ Aggiorna dati</button>
</div>   




</body>
</html>
